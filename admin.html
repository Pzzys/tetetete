<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Loryez - Painel Admin</title>
    <style>
        body { background: #050505; color: white; font-family: 'Outfit', sans-serif; display: flex; justify-content: center; padding: 40px; }
        .box { background: #111; padding: 30px; border-radius: 15px; border: 1px solid #333; width: 100%; max-width: 450px; }
        input, select, button { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #222; background: #1a1a1a; color: white; }
        button { background: #9d4edd; border: none; font-weight: bold; cursor: pointer; }
        h2 { color: #9d4edd; text-align: center; }
    </style>
</head>
<body>
    <div class="box">
        <h2>Loryez Admin</h2>
        <input type="text" id="user" placeholder="Usuário">
        <input type="password" id="pass" placeholder="Senha">
        <hr style="border: 0.5px solid #222; margin: 20px 0;">
        <input type="text" id="nome" placeholder="Nome do Filme/Série">
        <input type="text" id="tmdb_id" placeholder="ID do TMDB">
        <input type="text" id="patrocinador" placeholder="Patrocinador">
        <input type="text" id="eps_p" placeholder="Eps Patrocinados">
        <input type="text" id="eps_a" placeholder="Eps Assistidos">
        <input type="text" id="nota" placeholder="Nota da Lorena (0-10)">
        <select id="tipo">
            <option value="patrocinado">⭐ Aba Patrocinados</option>
            <option value="assistido">✅ Aba Assistidos</option>
        </select>
        <button onclick="salvar()">Cadastrar no Banco de Dados</button>
        <p id="msg" style="text-align: center;"></p>
    </div>

    <script>
        async function salvar() {
            const msg = document.getElementById('msg');
            msg.innerText = "Processando...";
            
            const payload = {
                user: document.getElementById('user').value,
                pass: document.getElementById('pass').value,
                nome: document.getElementById('nome').value,
                tmdb_id: document.getElementById('tmdb_id').value,
                patrocinador: document.getElementById('patrocinador').value,
                tipo: document.getElementById('tipo').value,
                eps_p: document.getElementById('eps_p').value,
                eps_a: document.getElementById('eps_a').value,
                nota: document.getElementById('nota').value
            };

            const res = await fetch('/api/save', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (res.ok) {
                msg.style.color = "#4cda64";
                msg.innerText = "✅ Cadastrado com sucesso!";
            } else {
                msg.style.color = "#ff5252";
                msg.innerText = "❌ Erro: Login inválido ou falha no banco.";
            }
        }
    </script>
</body>
</html>
